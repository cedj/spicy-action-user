// Generated by CoffeeScript 1.12.2
(function() {
  var debug;

  debug = (require('debug'))("spicy-action-user:mixin");

  module.exports = function() {
    return {
      init: function() {
        this.user = {
          admin: false
        };
        return this.on('mount', function() {
          this.ev.on('user-data', (function(_this) {
            return function(user) {
              return _this.update({
                user: user
              });
            };
          })(this));
          return this.ev.trigger('get-user-data');
        });
      },
      include: function() {
        this.on('ready', function() {
          debug('received ready ← server', this.data);
          return this.ev.trigger('user-data', this.data);
        });
        this.ev.on('get-user-data', function() {
          debug('get-user-data: emit join → server');
          return this.emit('join');
        });
        return this.ev.on('set-user-param', function(name, value) {
          debug('set-user-param → server', name, value);
          return this.emit('set_user_param', name, value);
        });
      }
    };
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWl4aW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtaXhpbi5jb2ZmZWUubWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVJO0FBQUEsTUFBQTs7RUFBQSxLQUFBLEdBQVEsQ0FBQyxPQUFBLENBQVEsT0FBUixDQUFELENBQUEsQ0FBa0IseUJBQWxCOztFQUVSLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQUE7V0FDZjtNQUFBLElBQUEsRUFBTSxTQUFBO1FBRUosSUFBQyxDQUFBLElBQUQsR0FBUTtVQUFDLEtBQUEsRUFBTSxLQUFQOztlQUVSLElBQUMsQ0FBQSxFQUFELENBQUksT0FBSixFQUFhLFNBQUE7VUFDWCxJQUFDLENBQUEsRUFBRSxDQUFDLEVBQUosQ0FBTyxXQUFQLEVBQW9CLENBQUEsU0FBQSxLQUFBO21CQUFBLFNBQUMsSUFBRDtxQkFDbEIsS0FBQyxDQUFBLE1BQUQsQ0FBUTtnQkFBQyxNQUFBLElBQUQ7ZUFBUjtZQURrQjtVQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBcEI7aUJBR0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxPQUFKLENBQVksZUFBWjtRQUpXLENBQWI7TUFKSSxDQUFOO01BVUEsT0FBQSxFQUFTLFNBQUE7UUFJUCxJQUFDLENBQUEsRUFBRCxDQUFJLE9BQUosRUFBYSxTQUFBO1VBQ1gsS0FBQSxDQUFNLHlCQUFOLEVBQWlDLElBQUMsQ0FBQSxJQUFsQztpQkFDQSxJQUFDLENBQUEsRUFBRSxDQUFDLE9BQUosQ0FBWSxXQUFaLEVBQXlCLElBQUMsQ0FBQSxJQUExQjtRQUZXLENBQWI7UUFPQSxJQUFDLENBQUEsRUFBRSxDQUFDLEVBQUosQ0FBTyxlQUFQLEVBQXdCLFNBQUE7VUFDdEIsS0FBQSxDQUFNLG1DQUFOO2lCQUNBLElBQUMsQ0FBQSxJQUFELENBQU0sTUFBTjtRQUZzQixDQUF4QjtlQU1BLElBQUMsQ0FBQSxFQUFFLENBQUMsRUFBSixDQUFPLGdCQUFQLEVBQXlCLFNBQUMsSUFBRCxFQUFNLEtBQU47VUFDdkIsS0FBQSxDQUFNLHlCQUFOLEVBQWlDLElBQWpDLEVBQXVDLEtBQXZDO2lCQUNBLElBQUMsQ0FBQSxJQUFELENBQU0sZ0JBQU4sRUFBd0IsSUFBeEIsRUFBOEIsS0FBOUI7UUFGdUIsQ0FBekI7TUFqQk8sQ0FWVDs7RUFEZTtBQUZqQiIsInNvdXJjZXNDb250ZW50IjpbIkEgcmlnaHRmdWwtaG90IG1peGluIGFuZCBzdG9yZSB0byBzdXBwb3J0IHNwaWN5LWFjdGlvbi11c2VyXG5cbiAgICBkZWJ1ZyA9IChyZXF1aXJlICdkZWJ1ZycpIFwic3BpY3ktYWN0aW9uLXVzZXI6bWl4aW5cIlxuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSAtPlxuICAgICAgaW5pdDogLT5cblxuICAgICAgICBAdXNlciA9IHthZG1pbjpmYWxzZX1cblxuICAgICAgICBAb24gJ21vdW50JywgLT5cbiAgICAgICAgICBAZXYub24gJ3VzZXItZGF0YScsICh1c2VyKSA9PlxuICAgICAgICAgICAgQHVwZGF0ZSB7dXNlcn1cblxuICAgICAgICAgIEBldi50cmlnZ2VyICdnZXQtdXNlci1kYXRhJ1xuXG4gICAgICBpbmNsdWRlOiAtPlxuXG5Ob3RpZmljYXRpb24gZnJvbSBzZXJ2ZXIgd2l0aCB1c2VyLWRhdGEuXG5cbiAgICAgICAgQG9uICdyZWFkeScsIC0+XG4gICAgICAgICAgZGVidWcgJ3JlY2VpdmVkIHJlYWR5IOKGkCBzZXJ2ZXInLCBAZGF0YVxuICAgICAgICAgIEBldi50cmlnZ2VyICd1c2VyLWRhdGEnLCBAZGF0YVxuXG5PbiBaYXBwYUpTLWNsaWVudCByZWFkeSB3ZSBzZW5kIGEgZ2VuZXJpYyBgc3Vic2NyaWJlYCBtZXNzYWdlLlxuSW4gcmVzcG9uc2UsIHRoZSBzZXJ2ZXIgd2lsbCBlbWl0IGByZWFkeWAuXG5cbiAgICAgICAgQGV2Lm9uICdnZXQtdXNlci1kYXRhJywgLT5cbiAgICAgICAgICBkZWJ1ZyAnZ2V0LXVzZXItZGF0YTogZW1pdCBqb2luIOKGkiBzZXJ2ZXInXG4gICAgICAgICAgQGVtaXQgJ2pvaW4nXG5cbk5vdGlmaWNhdGlvbiBmcm9tIGNsaWVudCB3aXRoIHVzZXIgcGFyYW1ldGVyLlxuXG4gICAgICAgIEBldi5vbiAnc2V0LXVzZXItcGFyYW0nLCAobmFtZSx2YWx1ZSkgLT5cbiAgICAgICAgICBkZWJ1ZyAnc2V0LXVzZXItcGFyYW0g4oaSIHNlcnZlcicsIG5hbWUsIHZhbHVlXG4gICAgICAgICAgQGVtaXQgJ3NldF91c2VyX3BhcmFtJywgbmFtZSwgdmFsdWVcbiJdfQ==
//# sourceURL=/srv/home/stephane/Artisan/Managed/Telecoms/spicy-action-user/mixin.coffee.md