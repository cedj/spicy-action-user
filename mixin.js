// Generated by CoffeeScript 1.12.2
(function() {
  var debug;

  debug = (require('debug'))("spicy-action-user:mixin");

  module.exports = function() {
    return {
      init: function() {
        this.user = {
          admin: false
        };
        return this.ev.on('user-data', (function(_this) {
          return function(user) {
            return _this.update({
              user: user
            });
          };
        })(this));
      },
      include: function() {
        this.on('ready', function() {
          debug('received ready ← server', this.data);
          return this.ev.trigger('user-data', this.data);
        });
        this.ev.on('get-user-data', (function(_this) {
          return function() {
            debug('get-user-data: emit join → server');
            return _this.emit('join');
          };
        })(this));
        return this.ev.on('set-user-param', (function(_this) {
          return function(name, value) {
            debug('set-user-param → server', name, value);
            return _this.emit('set_user_param', name, value);
          };
        })(this));
      }
    };
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWl4aW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtaXhpbi5jb2ZmZWUubWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVJO0FBQUEsTUFBQTs7RUFBQSxLQUFBLEdBQVEsQ0FBQyxPQUFBLENBQVEsT0FBUixDQUFELENBQUEsQ0FBa0IseUJBQWxCOztFQUVSLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQUE7V0FDZjtNQUFBLElBQUEsRUFBTSxTQUFBO1FBRUosSUFBQyxDQUFBLElBQUQsR0FBUTtVQUFDLEtBQUEsRUFBTSxLQUFQOztlQUVSLElBQUMsQ0FBQSxFQUFFLENBQUMsRUFBSixDQUFPLFdBQVAsRUFBb0IsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxJQUFEO21CQUNsQixLQUFDLENBQUEsTUFBRCxDQUFRO2NBQUMsTUFBQSxJQUFEO2FBQVI7VUFEa0I7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBCO01BSkksQ0FBTjtNQU9BLE9BQUEsRUFBUyxTQUFBO1FBSVAsSUFBQyxDQUFBLEVBQUQsQ0FBSSxPQUFKLEVBQWEsU0FBQTtVQUNYLEtBQUEsQ0FBTSx5QkFBTixFQUFpQyxJQUFDLENBQUEsSUFBbEM7aUJBQ0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxPQUFKLENBQVksV0FBWixFQUF5QixJQUFDLENBQUEsSUFBMUI7UUFGVyxDQUFiO1FBT0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxFQUFKLENBQU8sZUFBUCxFQUF3QixDQUFBLFNBQUEsS0FBQTtpQkFBQSxTQUFBO1lBQ3RCLEtBQUEsQ0FBTSxtQ0FBTjttQkFDQSxLQUFDLENBQUEsSUFBRCxDQUFNLE1BQU47VUFGc0I7UUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXhCO2VBTUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxFQUFKLENBQU8sZ0JBQVAsRUFBeUIsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQyxJQUFELEVBQU0sS0FBTjtZQUN2QixLQUFBLENBQU0seUJBQU4sRUFBaUMsSUFBakMsRUFBdUMsS0FBdkM7bUJBQ0EsS0FBQyxDQUFBLElBQUQsQ0FBTSxnQkFBTixFQUF3QixJQUF4QixFQUE4QixLQUE5QjtVQUZ1QjtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBekI7TUFqQk8sQ0FQVDs7RUFEZTtBQUZqQiIsInNvdXJjZXNDb250ZW50IjpbIkEgcmlnaHRmdWwtaG90IG1peGluIGFuZCBzdG9yZSB0byBzdXBwb3J0IHNwaWN5LWFjdGlvbi11c2VyXG5cbiAgICBkZWJ1ZyA9IChyZXF1aXJlICdkZWJ1ZycpIFwic3BpY3ktYWN0aW9uLXVzZXI6bWl4aW5cIlxuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSAtPlxuICAgICAgaW5pdDogLT5cblxuICAgICAgICBAdXNlciA9IHthZG1pbjpmYWxzZX1cblxuICAgICAgICBAZXYub24gJ3VzZXItZGF0YScsICh1c2VyKSA9PlxuICAgICAgICAgIEB1cGRhdGUge3VzZXJ9XG5cbiAgICAgIGluY2x1ZGU6IC0+XG5cbk5vdGlmaWNhdGlvbiBmcm9tIHNlcnZlciB3aXRoIHVzZXItZGF0YS5cblxuICAgICAgICBAb24gJ3JlYWR5JywgLT5cbiAgICAgICAgICBkZWJ1ZyAncmVjZWl2ZWQgcmVhZHkg4oaQIHNlcnZlcicsIEBkYXRhXG4gICAgICAgICAgQGV2LnRyaWdnZXIgJ3VzZXItZGF0YScsIEBkYXRhXG5cbk9uIFphcHBhSlMtY2xpZW50IHJlYWR5IHdlIHNlbmQgYSBnZW5lcmljIGBzdWJzY3JpYmVgIG1lc3NhZ2UuXG5JbiByZXNwb25zZSwgdGhlIHNlcnZlciB3aWxsIGVtaXQgYHJlYWR5YC5cblxuICAgICAgICBAZXYub24gJ2dldC11c2VyLWRhdGEnLCA9PlxuICAgICAgICAgIGRlYnVnICdnZXQtdXNlci1kYXRhOiBlbWl0IGpvaW4g4oaSIHNlcnZlcidcbiAgICAgICAgICBAZW1pdCAnam9pbidcblxuTm90aWZpY2F0aW9uIGZyb20gY2xpZW50IHdpdGggdXNlciBwYXJhbWV0ZXIuXG5cbiAgICAgICAgQGV2Lm9uICdzZXQtdXNlci1wYXJhbScsIChuYW1lLHZhbHVlKSA9PlxuICAgICAgICAgIGRlYnVnICdzZXQtdXNlci1wYXJhbSDihpIgc2VydmVyJywgbmFtZSwgdmFsdWVcbiAgICAgICAgICBAZW1pdCAnc2V0X3VzZXJfcGFyYW0nLCBuYW1lLCB2YWx1ZVxuIl19
//# sourceURL=/srv/home/stephane/Artisan/Managed/Telecoms/spicy-action-user/mixin.coffee.md