// Generated by CoffeeScript 1.12.2
(function() {
  var debug;

  debug = (require('debug'))("spicy-action-user:mixin");

  module.exports = function() {
    return {
      init: function() {
        this.user = {
          admin: false
        };
        return this.on('mount', function() {
          return this.ev.on('user-data', (function(_this) {
            return function(user) {
              return _this.update({
                user: user
              });
            };
          })(this));
        });
      },
      include: function(arg) {
        var ev;
        ev = arg.ev;
        this.on('welcome', function() {
          debug('welcome', this.data);
          return ev.trigger('welcome', this.data);
        });
        this.on('failed', function() {
          debug('failed', this.data);
          return ev.trigger('socketio-fail');
        });
        ev.on('ready', (function(_this) {
          return function() {
            debug('ready â†’ emit join');
            return _this.emit('join');
          };
        })(this));
        return this.on('ready', function() {
          debug('received ready', this.data);
          return this.ev.trigger('user-data', this.data);
        });
      }
    };
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWl4aW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtaXhpbi5jb2ZmZWUubWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVJO0FBQUEsTUFBQTs7RUFBQSxLQUFBLEdBQVEsQ0FBQyxPQUFBLENBQVEsT0FBUixDQUFELENBQUEsQ0FBa0IseUJBQWxCOztFQUVSLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQUE7V0FDZjtNQUFBLElBQUEsRUFBTSxTQUFBO1FBRUosSUFBQyxDQUFBLElBQUQsR0FBUTtVQUFDLEtBQUEsRUFBTSxLQUFQOztlQUVSLElBQUMsQ0FBQSxFQUFELENBQUksT0FBSixFQUFhLFNBQUE7aUJBQ1gsSUFBQyxDQUFBLEVBQUUsQ0FBQyxFQUFKLENBQU8sV0FBUCxFQUFvQixDQUFBLFNBQUEsS0FBQTttQkFBQSxTQUFDLElBQUQ7cUJBRWxCLEtBQUMsQ0FBQSxNQUFELENBQVE7Z0JBQUMsTUFBQSxJQUFEO2VBQVI7WUFGa0I7VUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQXBCO1FBRFcsQ0FBYjtNQUpJLENBQU47TUFTQSxPQUFBLEVBQVMsU0FBQyxHQUFEO0FBS1AsWUFBQTtRQUxTLEtBQUQ7UUFLUixJQUFDLENBQUEsRUFBRCxDQUFJLFNBQUosRUFBZSxTQUFBO1VBQ2IsS0FBQSxDQUFNLFNBQU4sRUFBaUIsSUFBQyxDQUFBLElBQWxCO2lCQUNBLEVBQUUsQ0FBQyxPQUFILENBQVcsU0FBWCxFQUFzQixJQUFDLENBQUEsSUFBdkI7UUFGYSxDQUFmO1FBT0EsSUFBQyxDQUFBLEVBQUQsQ0FBSSxRQUFKLEVBQWMsU0FBQTtVQUNaLEtBQUEsQ0FBTSxRQUFOLEVBQWdCLElBQUMsQ0FBQSxJQUFqQjtpQkFDQSxFQUFFLENBQUMsT0FBSCxDQUFXLGVBQVg7UUFGWSxDQUFkO1FBT0EsRUFBRSxDQUFDLEVBQUgsQ0FBTSxPQUFOLEVBQWUsQ0FBQSxTQUFBLEtBQUE7aUJBQUEsU0FBQTtZQUNiLEtBQUEsQ0FBTSxtQkFBTjttQkFDQSxLQUFDLENBQUEsSUFBRCxDQUFNLE1BQU47VUFGYTtRQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBZjtlQU1BLElBQUMsQ0FBQSxFQUFELENBQUksT0FBSixFQUFhLFNBQUE7VUFDWCxLQUFBLENBQU0sZ0JBQU4sRUFBd0IsSUFBQyxDQUFBLElBQXpCO2lCQUlBLElBQUMsQ0FBQSxFQUFFLENBQUMsT0FBSixDQUFZLFdBQVosRUFBeUIsSUFBQyxDQUFBLElBQTFCO1FBTFcsQ0FBYjtNQXpCTyxDQVRUOztFQURlO0FBRmpCIiwic291cmNlc0NvbnRlbnQiOlsiQSByaWdodGZ1bC1ob3QgbWl4aW4gdG8gc3VwcG9ydCBzcGljeS1hY3Rpb24tdXNlclxuXG4gICAgZGVidWcgPSAocmVxdWlyZSAnZGVidWcnKSBcInNwaWN5LWFjdGlvbi11c2VyOm1peGluXCJcblxuICAgIG1vZHVsZS5leHBvcnRzID0gLT5cbiAgICAgIGluaXQ6IC0+XG5cbiAgICAgICAgQHVzZXIgPSB7YWRtaW46ZmFsc2V9XG5cbiAgICAgICAgQG9uICdtb3VudCcsIC0+XG4gICAgICAgICAgQGV2Lm9uICd1c2VyLWRhdGEnLCAodXNlcikgPT5cbiAgICAgICAgICAgICMgZGVidWcgJ3VzZXItZGF0YScsIHVzZXJcbiAgICAgICAgICAgIEB1cGRhdGUge3VzZXJ9XG5cbiAgICAgIGluY2x1ZGU6ICh7ZXZ9KSAtPlxuXG5UaGUgYHdlbGNvbWVgIGV2ZW50IGlzIGVtaXR0ZWQgYnkgdGhlIHNlcnZlciB3aGVuIHRoZSBTb2NrZXQuaW8gY29ubmVjdGlvblxuaXMgZXN0YWJsaXNoZWQuXG5cbiAgICAgICAgQG9uICd3ZWxjb21lJywgLT5cbiAgICAgICAgICBkZWJ1ZyAnd2VsY29tZScsIEBkYXRhXG4gICAgICAgICAgZXYudHJpZ2dlciAnd2VsY29tZScsIEBkYXRhXG5cblRoZSBgZmFpbGVkYCBldmVudCBpcyBlbWl0dGVkIGJ5IHRoZSBzZXJ2ZXIgaW5zdGVhZCBvZiB0aGUgYHdlbGNvbWVgIG1lc3NhZ2VcbmlmIHRoZSBaYXBwYUpTLWNsaWVudCBuZWdvdGlhdGlvbiBmYWlsZWQuXG5cbiAgICAgICAgQG9uICdmYWlsZWQnLCAtPlxuICAgICAgICAgIGRlYnVnICdmYWlsZWQnLCBAZGF0YVxuICAgICAgICAgIGV2LnRyaWdnZXIgJ3NvY2tldGlvLWZhaWwnXG5cbk9uIFphcHBhSlMtY2xpZW50IHJlYWR5IHdlIHNlbmQgYSBnZW5lcmljIGBzdWJzY3JpYmVgIG1lc3NhZ2UuXG5JbiByZXNwb25zZSwgdGhlIHNlcnZlciB3aWxsIGVtaXQgYHJlYWR5YC5cblxuICAgICAgICBldi5vbiAncmVhZHknLCA9PlxuICAgICAgICAgIGRlYnVnICdyZWFkeSDihpIgZW1pdCBqb2luJ1xuICAgICAgICAgIEBlbWl0ICdqb2luJyAjIFRyaWdnZXJzICdyZWFkeScgZnJvbSB0aGUgc2VydmVyLXNpZGUuXG5cblRoZSBgcmVhZHlgIGV2ZW50IGZyb20gdGhlIHNlcnZlci1zaWRlIHByb3ZpZGVzIGB1c2VyX2RhdGFgLlxuXG4gICAgICAgIEBvbiAncmVhZHknLCAtPlxuICAgICAgICAgIGRlYnVnICdyZWNlaXZlZCByZWFkeScsIEBkYXRhXG5cblJldHVybiB1c2VyLWRhdGFcblxuICAgICAgICAgIEBldi50cmlnZ2VyICd1c2VyLWRhdGEnLCBAZGF0YVxuIl19
//# sourceURL=/srv/home/stephane/Artisan/Managed/Telecoms/spicy-action-user/mixin.coffee.md